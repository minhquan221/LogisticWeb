@model  ModelHelper.ViewModel.ContractEditViewModel
@{
    ViewBag.Title = "LamipelVN | Contract Detail";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="page-container">

    <!-- BEGIN SIDEBAR -->

    @Html.Action("MenuSiteBar", "Common")

    <!-- END SIDEBAR -->
    <!-- BEGIN PAGE -->
    <div class="page-content">
        <div class="container-fluid">
            <!-- BEGIN PAGE HEADER-->
            <div class="row-fluid">
                <div class="span12">
                    <h3 class="page-title">
                        Contract Detail
                        <small></small>
                    </h3>
                    <ul class="breadcrumb sitemap"></ul>
                </div>
            </div>
            <!-- END PAGE HEADER-->
            <!-- BEGIN PAGE CONTENT-->
            <div class="row-fluid">
                <div class="span12">
                    <div class="portlet box blue">
                        <div class="portlet-title">
                            <div class="caption"><i class="icon-reorder"></i>Detail Contract</div>
                            <div class="tools">
                                <a href="javascript:;" class="collapse"></a>
                            </div>
                        </div>
                        <div id="detail" class="portlet-body form">
                            <input hidden name="ID" value="@Model.ID" />
                            <input hidden name="ITEMLISTID" value="@Model.ITEMLISTID" />
                            <!-- BEGIN FORM-->
                            <div class="form-horizontal">
                                <div class="control-group">
                                    <div class="controls-left-50 nosize">
                                        <label class="control-label">Contract Code:</label>
                                        <div class="controls">
                                            <input name="CONTRACTCODE" autocomplete="off" type="text" class="span6 m-wrap" value="@Model.CONTRACTCODE" />
                                        </div>
                                    </div>
                                    <div class="controls-left-50 nosize">
                                        <label class="control-label">Contract Date:</label>
                                        <div class="controls">
                                            <input readonly name="CONTRACTDATE" autocomplete="off" type="text" class="span6 m-wrap" value="@Model.CONTRACTDATE.ToString("yyyy-MM-dd HH:mm:ss")" />
                                        </div>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <div class="controls-left-50 nosize">
                                        <label class="control-label">POL:</label>
                                        <div class="controls">
                                            <input value="@Model.POL" name="POL" autocomplete="off" type="text" class="span6 m-wrap" />
                                        </div>
                                    </div>
                                    <div class="controls-left-50 nosize">
                                        <label class="control-label">POD:</label>
                                        <div class="controls">
                                            <input value="@Model.POD" name="POD" autocomplete="off" type="text" class="span6 m-wrap" />
                                        </div>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <div class="controls-left-50 nosize">
                                        <label class="control-label">Delivery Place:</label>
                                        <div class="controls">
                                            <textarea style="resize: none;" name="DELIVERYPLACE" class="span6 m-wrap" rows="3">@Model.DELIVERYPLACE</textarea>
                                        </div>
                                    </div>
                                    <div class="controls-left-50 nosize">
                                        <label class="control-label">Delivery Method:</label>
                                        <div class="controls">
                                            <select name="DELIVERYMETHODID" data-value="ID" data-name="NAME" ajaxurl="/deliverymethod/getlist" class="customselect span6" data-selected="@Model.DELIVERYMETHODID"></select>
                                        </div>
                                    </div>
                                    <div class="controls-left-50 nosize">
                                        <label class="control-label">Container Type:</label>
                                        <div class="controls">
                                            <select name="CONTAINERTYPEID" data-value="ID" data-name="NAME" ajaxurl="/containertype/getlist" class="customselect span6" data-selected="@Model.CONTAINERTYPEID"></select>
                                        </div>
                                    </div>
                                </div>
                                <div class="control-group">
                                </div>
                                <div class="control-group">
                                    <div class="controls-left-50 nosize">
                                        <label class="control-label">Inco Term:</label>
                                        <div class="controls">
                                            <input value="@Model.INCOTERM" name="INCOTERM" autocomplete="off" type="text" class="span6 m-wrap" />
                                        </div>
                                    </div>
                                    <div class="controls-left-50 nosize">
                                        <label class="control-label">Payment Term:</label>
                                        <div class="controls">
                                            <input value="@Model.PAYMENTTERM" name="PAYMENTTERM" autocomplete="off" type="text" class="span6 m-wrap" />
                                        </div>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <div class="controls-left-50 nosize">
                                        <label class="control-label">Commission In Charge:</label>
                                        <div class="controls">
                                            <input value="@Model.COMMISIONINCHARGE" name="COMMISIONINCHARGE" autocomplete="off" type="text" class="span6 m-wrap" />
                                        </div>
                                    </div>
                                    <div class="controls-left-50 nosize">
                                        <label class="control-label">Commission Percent:</label>
                                        <div class="controls">
                                            <input value="@Model.COMMISSIONPERCENT" name="COMMISSIONPERCENT" autocomplete="off" type="number" class="span6 m-wrap" />
                                        </div>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <div class="controls-left-50 nosize">
                                        <label class="control-label">Remark:</label>
                                        <div class="controls">
                                            <textarea style="resize: none;" name="REMARK" class="span6 m-wrap" rows="3">@Model.REMARK</textarea>
                                        </div>
                                    </div>
                                    <div class="controls-left-50 nosize">
                                        <label class="control-label">Delivery Plan:</label>
                                        <div class="controls">
                                            <input readonly value="@(Model.DELIVERYPLAN.HasValue ? Model.DELIVERYPLAN.Value.ToString("yyyy-MM-dd") : "")" name="DELIVERYPLAN" autocomplete="off" type="text" class="span6 m-wrap" />
                                        </div>
                                    </div>
                                    <div class="controls-left-50 nosize">
                                        <label class="control-label">Spot export / Domestic:</label>
                                        <div class="controls" style="text-align:center;">
                                            <input name="DomesticCheck" type="checkbox" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- END FORM-->
                        </div>
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12">
                    <div class="portlet box blue">
                        <div class="portlet-title">
                            <div class="caption" style="min-width: 104px;"><i class="icon-reorder"></i>Buyer</div>
                            <div class="filter-on-title">
                                <select name="listcustomer" onchange="LoadDetailCustomer(this)" class="span12"></select>
                            </div>
                            <div class="action-on-title">
                                <div class="btn-group">
                                    <button id="formcustomer" onclick="FormAddNewCustomer(this)" class="btn green">
                                        Add New Buyer <i class="icon-plus"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="tools">
                                <a href="javascript:;" class="collapse"></a>
                            </div>
                        </div>
                        <div id="buyer" class="portlet-body form">
                            <!-- BEGIN FORM-->
                            <div class="form-horizontal">
                                <input type="hidden" name="CUSTOMERID" value="@Model.CUSTOMERID" />
                                <div class="control-group">
                                    <div class="controls-left-50 nosize">
                                        <label class="control-label">Buyer Name:</label>
                                        <div class="controls">
                                            <input readonly value="@Model.CustomerDetail.CUSTOMERNAME" name="CUSTOMERNAME" autocomplete="off" type="text" class="span6 m-wrap" />
                                        </div>
                                    </div>
                                    <div class="controls-left-50 nosize">
                                        <label class="control-label">Legal Representative:</label>
                                        <div class="controls">
                                            <input readonly value="@Model.CustomerDetail.CUSTOMERNAMEPRIMARY" name="CUSTOMERNAMEPRIMARY" autocomplete="off" type="text" class="span6 m-wrap" />
                                        </div>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <div class="controls-left-50 nosize">
                                        <label class="control-label">Address:</label>
                                        <div class="controls">
                                            <textarea style="resize: none;" readonly name="CUSTOMERADDR" class="span6 m-wrap" rows="3">@Model.CustomerDetail.CUSTOMERADDR</textarea>
                                        </div>
                                    </div>
                                    <div class="controls-left-50 nosize">
                                        <label class="control-label">Tel:</label>
                                        <div class="controls">
                                            <input readonly value="@Model.CustomerDetail.CUSTOMERTEL" name="CUSTOMERTEL" autocomplete="off" type="text" class="span6 m-wrap" />
                                        </div>
                                    </div>
                                    <div class="controls-left-50 nosize">
                                        <label class="control-label">Email:</label>
                                        <div class="controls">
                                            <input readonly value="@Model.CustomerDetail.CUSTOMERFAX" name="CUSTOMERFAX" autocomplete="off" type="text" class="span6 m-wrap" />
                                        </div>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <div class="controls-left-50 nosize">
                                        <label class="control-label">Note:</label>
                                        <div class="controls">
                                            <textarea style="resize: none;" readonly name="CUSTOMERNOTE" class="span6 m-wrap" rows="3">@Model.CustomerDetail.CUSTOMERNOTE</textarea>
                                        </div>
                                    </div>

                                </div>
                                @*<div id="actionbuyer" class="form-actions">
                                        <button type="button" onclick="SaveBuyer(this)" class="btn blue" style="width: 200px;">Save<br />Lưu</button>
                                        <button type="button" style="width: 92px;" class="btn" onclick="CancelCreateBuyer(this)">Cancel<br />Hủy</button>
                                    </div>*@
                            </div>
                            <!-- END FORM-->
                        </div>
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12">
                    <div class="portlet box blue">
                        <div class="portlet-title">
                            <div class="caption" style="min-width: 104px;"><i class="icon-reorder"></i>Consignee</div>
                            <div class="filter-on-title">
                                <select name="listconsignee" onchange="LoadDetailConsignee(this)" class="span12"></select>
                            </div>
                            <div class="action-on-title">
                                <div class="btn-group">
                                    <button id="formconsignee" onclick="FormAddNewConsignee(this)" class="btn green">
                                        Add New Consignee <i class="icon-plus"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="tools">
                                <a href="javascript:;" class="collapse"></a>
                            </div>
                        </div>
                        <div id="consignee" class="portlet-body form">
                            <input type="hidden" name="CONSIGNEEID" value="@Model.ConsigneeDetail.CONSIGNEEID" />
                            <!-- BEGIN FORM-->
                            <div class="form-horizontal">
                                <div class="control-group">
                                    <div class="controls-left-50 nosize">
                                        <label class="control-label">Consignee Name:</label>
                                        <div class="controls">
                                            <input readonly value="@Model.ConsigneeDetail.CONSIGNEENAME" name="CONSIGNEENAME" autocomplete="off" type="text" class="span6 m-wrap" />
                                        </div>
                                    </div>
                                    <div class="controls-left-50 nosize">
                                        <label class="control-label">Attn.:</label>
                                        <div class="controls">
                                            <input readonly value="@Model.ConsigneeDetail.CONSIGNEENAMEPRIMARY" name="CONSIGNEENAMEPRIMARY" autocomplete="off" type="text" class="span6 m-wrap" />
                                        </div>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <div class="controls-left-50 nosize">
                                        <label class="control-label">Address:</label>
                                        <div class="controls">
                                            <textarea style="resize: none;" readonly name="CONSIGNEEADDR" class="span6 m-wrap" rows="3">@Model.ConsigneeDetail.CONSIGNEEADDR</textarea>
                                        </div>
                                    </div>
                                    <div class="controls-left-50 nosize">
                                        <label class="control-label">Tel:</label>
                                        <div class="controls">
                                            <input readonly value="@Model.ConsigneeDetail.CONSIGNEETEL" name="CONSIGNEETEL" autocomplete="off" type="text" class="span6 m-wrap" />
                                        </div>
                                    </div>
                                    <div class="controls-left-50 nosize">
                                        <label class="control-label">Email:</label>
                                        <div class="controls">
                                            <input readonly value="@Model.ConsigneeDetail.CONSIGNEEFAX" name="CONSIGNEEFAX" autocomplete="off" type="text" class="span6 m-wrap" />
                                        </div>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <div class="controls-left-50 nosize">
                                        <label class="control-label">Note:</label>
                                        <div class="controls">
                                            <textarea style="resize: none;" readonly name="CONSIGNEENOTE" class="span6 m-wrap" rows="3">@Model.ConsigneeDetail.CONSIGNEENOTE</textarea>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <!-- END FORM-->
                        </div>
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12">
                    <div class="portlet box blue">
                        <div class="portlet-title">
                            <div class="caption"><i class="icon-reorder"></i>Item contract list</div>
                            <div class="action-on-title">
                                <div class="btn-group">
                                    <button onclick="AddNewItemForm()" class="btn green">
                                        Add Item <i class="icon-plus"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="tools">
                                <a href="javascript:;" class="collapse"></a>
                            </div>
                        </div>
                        <div id="itemlist" class="portlet-body form">
                            <!-- BEGIN FORM-->
                            @{
                                foreach (var item in Model.ItemList)
                                {
                                    decimal approximate = 0;
                                    switch (item.OVERUNIT)
                                    {
                                        case "kgs":
                                            approximate = item.PRICE * item.QUANTITYKGS;
                                            break;
                                        case "sqft":
                                            approximate = item.PRICE * item.QUANTITYSQFT;
                                            break;
                                        case "pcs":
                                            approximate = item.PRICE * item.QUANTITYPCS;
                                            break;
                                    }
                                    <div name="item" variableid="@item.ITEMCODE" class="row-fluid">
                                        <input name="ITEMLISTID" type="hidden" value="@item.ITEMLISTID" />
                                        <input name="ITEMCODE" type="hidden" value="@item.ITEMCODE" />
                                        <input name="ID" type="hidden" value="@item.ID" />
                                        <div class="templatespan12">
                                            <div class="portlet box blue">
                                                <div class="portlet-title">
                                                    <div class="caption"><i class="icon-reorder"></i>@item.ITEMCODE</div>
                                                    <div class="tools">
                                                        <a href="javascript:;" class="collapse"></a>
                                                    </div>
                                                </div>
                                                <div class="portlet-body form">
                                                    <!-- BEGIN FORM-->
                                                    <div class="form-horizontal">
                                                        <div class="control-group">
                                                            <div class="controls-left-50 nosize">
                                                                <label class="control-label">Customs Code:</label>
                                                                <div class="controls">
                                                                    <input value="@item.HAIQUANID" name="HAIQUANID" autocomplete="off" type="text" class="span6 m-wrap" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="control-group">
                                                            <div class="controls-left-50 nosize">
                                                                <label class="control-label">Selection:</label>
                                                                <div class="controls">
                                                                    <select name="SELECTIONID" data-value="ID" data-name="NAME" ajaxurl="/selection/getlist" afterload="LoadSubSelRelated" onchange="LoadSubSelRelated(this)" class="customselect span6" data-selected="@item.SELECTIONID"></select>
                                                                </div>
                                                            </div>
                                                            <div class="controls-left-50 nosize">
                                                                <label class="control-label">Sub Selection:</label>
                                                                <div class="controls">
                                                                    <select name="SUBSELECTIONID" class="span6" data-selected="@item.SUBSELECTIONID" afterload=""></select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="control-group">
                                                            <div class="controls-left-50 nosize">
                                                                <label class="control-label">Quantity CNT:</label>
                                                                <div class="controls">
                                                                    <input value="@item.QUANTITYCNT" name="QUANTITYCNT" autocomplete="off" type="number" class="span6 m-wrap" />
                                                                </div>
                                                            </div>
                                                            <div class="controls-left-50 nosize">
                                                                <label class="control-label">Quantity PCS:</label>
                                                                <div class="controls">
                                                                    <input value="@item.QUANTITYPCS" onkeyup="RecallApproximate(this)" name="QUANTITYPCS" autocomplete="off" type="number" class="span6 m-wrap" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="control-group">
                                                            <div class="controls-left-50 nosize">
                                                                <label class="control-label">Quantity KGS:</label>
                                                                <div class="controls">
                                                                    <input value="@item.QUANTITYKGS" onkeyup="RecallApproximate(this)" name="QUANTITYKGS" autocomplete="off" type="number" class="span6 m-wrap" />
                                                                </div>
                                                            </div>
                                                            <div class="controls-left-50 nosize">
                                                                <label class="control-label">Quantity SQFT:</label>
                                                                <div class="controls">
                                                                    <input value="@item.QUANTITYSQFT" onkeyup="RecallApproximate(this)" name="QUANTITYSQFT" autocomplete="off" type="number" class="span6 m-wrap" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="control-group">
                                                            <div class="controls-left-50 nosize">
                                                                <label class="control-label">Price:</label>
                                                                <div class="controls">
                                                                    <input value="@item.PRICE" onkeyup="RecallApproximate(this)" name="PRICE" autocomplete="off" type="number" class="span6 m-wrap" />
                                                                </div>
                                                            </div>
                                                            <div class="controls-left-50 nosize">
                                                                <label class="control-label">Over:</label>
                                                                <div class="controls">
                                                                    <input value="@item.OVERUNIT" type="hidden" name="OVERUNIT" />
                                                                    <label class="radio">
                                                                        <input onclick="RecallApproximate(this)" id="kgs_@item.ITEMCODE" type="radio" name="over_@item.ITEMCODE" value="kgs" @(item.OVERUNIT == "kgs" ? "checked" : "") />
                                                                        KGS
                                                                    </label>
                                                                    <label class="radio">
                                                                        <input onclick="RecallApproximate(this)" id="sqft_@item.ITEMCODE" type="radio" name="over_@item.ITEMCODE" value="sqft" @(item.OVERUNIT == "sqft" ? "checked" : "") />
                                                                        SQFT
                                                                    </label>
                                                                    <label class="radio">
                                                                        <input onclick="RecallApproximate(this)" id="pcs_@item.ITEMCODE" type="radio" name="over_@item.ITEMCODE" value="pcs" @(item.OVERUNIT == "pcs" ? "checked" : "") />
                                                                        PCS
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="control-group">
                                                            <div class="controls-left-50 nosize">
                                                                <label class="control-label">Approximate:</label>
                                                                <div class="controls">
                                                                    <input readonly name="Approximate" value="@approximate" autocomplete="off" type="text" class="span6 m-wrap" />
                                                                    <span class="approximateunit" name="approximateunit">@item.OVERUNIT</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- END FORM-->
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                }
                            }
                            <!-- END FORM-->
                        </div>
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12">
                    <div class="portlet box blue no-border">
                        <div class="portlet-body form">
                            <div class="form-actions no-border">
                                <button type="button" onclick="UpdateContract()" class="btn blue" style="width: 200px;">Save<br />Lưu</button>
                                <button type="button" style="width: 92px;" class="btn" onclick="location.href = '/contract'">Cancel<br />Hủy</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- END PAGE CONTENT-->
        </div>
        <!-- END PAGE -->
    </div>
</div>

@section styles{
    <!-- BEGIN PAGE LEVEL STYLES -->
    <link rel="stylesheet" type="text/css" href="/Content/assets/plugins/bootstrap-fileupload/bootstrap-fileupload.css" />
    <link rel="stylesheet" type="text/css" href="/Content/assets/plugins/gritter/css/jquery.gritter.css" />
    <link rel="stylesheet" type="text/css" href="/Content/assets/plugins/chosen-bootstrap/chosen/chosen.css" />
    <link rel="stylesheet" type="text/css" href="/Content/assets/plugins/select2/select2_metro.css" />
    <link rel="stylesheet" type="text/css" href="/Content/assets/plugins/clockface/css/clockface.css" />
    <link rel="stylesheet" type="text/css" href="/Content/assets/plugins/bootstrap-wysihtml5/bootstrap-wysihtml5.css" />
    <link rel="stylesheet" type="text/css" href="/Content/assets/plugins/bootstrap-datepicker/css/datepicker.css" />
    <link rel="stylesheet" type="text/css" href="/Content/assets/plugins/bootstrap-timepicker/compiled/timepicker.css" />
    <link rel="stylesheet" type="text/css" href="/Content/assets/plugins/bootstrap-colorpicker/css/colorpicker.css" />
    <link rel="stylesheet" type="text/css" href="/Content/assets/plugins/bootstrap-toggle-buttons/static/stylesheets/bootstrap-toggle-buttons.css" />
    <link rel="stylesheet" type="text/css" href="/Content/assets/plugins/bootstrap-daterangepicker/daterangepicker.css" />
    <link rel="stylesheet" type="text/css" href="/Content/assets/plugins/bootstrap-datetimepicker/css/datetimepicker.css" />
    <link rel="stylesheet" type="text/css" href="/Content/assets/plugins/jquery-multi-select/css/multi-select-metro.css" />
    <link href="/Content/assets/plugins/bootstrap-modal/css/bootstrap-modal.css" rel="stylesheet" type="text/css" />
    <link href="/Content/assets/plugins/bootstrap-switch/static/stylesheets/bootstrap-switch-metro.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" type="text/css" href="/Content/assets/plugins/jquery-tags-input/jquery.tagsinput.css" />
    <link href="~/Content/jqueryUi.css" rel="stylesheet" />
    @*<link href="~/Content/stylesheet.css" rel="stylesheet" />*@
    <!-- END PAGE LEVEL STYLES -->
}

@section scripts{
    <!-- BEGIN PAGE LEVEL SCRIPTS -->
    <script src="~/Content/assets/plugins/uniform/jquery.uniform.js"></script>
    <script src="~/Scripts/Common/customsuggest.js"></script>
    <script src="~/Scripts/Common/customvalidate.js"></script>
    <script src="~/Scripts/Common/customselect.js"></script>
    <!-- END PAGE LEVEL SCRIPTS -->
    <script type="text/javascript">
        var countListItem = $('#itemlist').find('div[name=item]').length;
    </script>
    <script src="~/Scripts/business/contract.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('input[type=radio]').uniform();
            LoadListCustomer();
            LoadListConsignee();
            $('input[name=DELIVERYPLAN]').datepicker({
                "autoclose": true,
                format: 'yyyy-MM-dd',
            });
            $('input[name=DomesticCheck]').uniform();
            //LoadListDeliveryMethod();
            //LoadListContainerType();
        })
    </script>
}
